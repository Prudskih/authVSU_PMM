{% extends "base.html" %}
{% block title %}–ú–æ–∏ PDF-—Ñ–∞–π–ª—ã{% endblock %}
{% block content %}
{% if role == "admin" %}
<h2>–ó–∞–≥—Ä—É–∑–∏—Ç—å PDF</h2>
<form method="POST" enctype="multipart/form-data" action="/upload_pdf">
    <input type="file" name="pdf" accept=".pdf" required>
    <button type="submit">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
</form>

<hr>
{% endif %}

<h2>{% if role == "admin" %}–ú–æ–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã{% else %}–î–æ—Å—Ç—É–ø–Ω—ã–µ PDF-—Ñ–∞–π–ª—ã{% endif %}</h2>
{% if files %}
    <table style="border-collapse: collapse; width: 100%; margin-top: 20px;">
        <thead>
            <tr style="background-color: #f0f0f0;">
                <th style="border: 1px solid #ddd; padding: 10px; text-align: left;">–ò–º—è —Ñ–∞–π–ª–∞</th>
                {% if role == "user" %}
                <th style="border: 1px solid #ddd; padding: 10px; text-align: left;">–ó–∞–≥—Ä—É–∑–∏–ª</th>
                {% endif %}
                <th style="border: 1px solid #ddd; padding: 10px; text-align: left;">–†–∞–∑–º–µ—Ä</th>
                <th style="border: 1px solid #ddd; padding: 10px; text-align: left;">–î–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏</th>
                <th style="border: 1px solid #ddd; padding: 10px; text-align: left;">–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for file in files %}
            <tr>
                <td style="border: 1px solid #ddd; padding: 10px;">{{ file.filename }}</td>
                {% if role == "user" %}
                <td style="border: 1px solid #ddd; padding: 10px;">
                    {% if file.is_owner %}
                        <span style="color: #666;">–í—ã</span>
                    {% else %}
                        <span style="color: #0066cc;">{{ file.owner }}</span>
                    {% endif %}
                </td>
                {% endif %}
                <td style="border: 1px solid #ddd; padding: 10px;">
                    {% if file.size < 1024 %}
                        {{ file.size }} –ë
                    {% elif file.size < 1048576 %}
                        {{ "%.2f"|format(file.size / 1024) }} –ö–ë
                    {% else %}
                        {{ "%.2f"|format(file.size / 1048576) }} –ú–ë
                    {% endif %}
                </td>
                <td style="border: 1px solid #ddd; padding: 10px;">
                    {{ file.modified|datetimeformat('%d.%m.%Y %H:%M') }}
                </td>
                <td style="border: 1px solid #ddd; padding: 10px;">
                    <a href="/view_pdf/{{ file.filename }}" target="_blank" style="color: #0066cc; text-decoration: none;">üìÑ –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p style="color: #666; margin-top: 20px;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.</p>
{% endif %}

<br>
<a href="/dashboard">‚Üê –ù–∞–∑–∞–¥ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</a>
{% endblock %}