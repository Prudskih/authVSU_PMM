# Система аутентификации с защищенным хранением файлов

Веб-приложение на Flask с аутентификацией пользователей и защищенным хранением PDF-файлов с использованием криптографии.

## Возможности

- Аутентификация пользователей с ролями (admin/user)
- Защищенное хранение PDF-файлов (шифрование AES-256-GCM + цифровая подпись RSA-PSS)
- Просмотр загруженных файлов
- Админ-панель для управления пользователями

## Установка

### 1. Клонирование и создание виртуального окружения

```bash
python -m venv venv
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate
```

### 2. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 3. Запуск приложения

```bash
python app.py
```

Приложение будет доступно по адресу: `http://localhost:5000`

## Структура проекта

```
auth/
├── app.py                 # Основное Flask приложение
├── config.py              # Конфигурация (ключи, настройки)
├── models/                # Модели данных
├── repositories/          # Репозитории (доступ к данным)
├── services/              # Бизнес-логика
│   ├── auth_service.py    # Сервис аутентификации
│   ├── crypto_service.py  # Сервис шифрования
│   ├── file_service.py    # Сервис работы с файлами
│   └── password_service.py # Сервис паролей
├── templates/             # HTML шаблоны
├── tests/                 # Тесты
├── uploads/               # Загруженные файлы (зашифрованные)
└── keys/                  # Криптографические ключи (генерируются автоматически)
```

## Тестирование

Запуск всех тестов:

```bash
pytest tests/ -v
```

Запуск с покрытием кода:

```bash
pytest tests/ --cov=. --cov-report=html
```

Запуск конкретного теста:

```bash
pytest tests/test_auth_service.py -v
```

## Безопасность

- **Шифрование файлов**: AES-256-GCM (симметричное шифрование)
- **Цифровая подпись**: RSA-PSS для проверки целостности
- **Хеширование паролей**: bcrypt
- **Ключи**: Автоматически генерируются при первом запуске и сохраняются в `keys/`


## Роли пользователей

- **Admin**: Может загружать PDF-файлы и управлять пользователями
- **User**: Может просматривать свои файлы и файлы администраторов

## Технологии

- Python 3.10+
- Flask 3.1+
- cryptography (AES-256-GCM, RSA-PSS)
- bcrypt
- pytest (тестирование)

## Разработка

### Добавление новых тестов

Создайте файл в `tests/` с префиксом `test_`:

```python
def test_new_feature():
    assert True
```

### Изменение конфигурации

Все настройки находятся в `config.py` и `.env` файле.

